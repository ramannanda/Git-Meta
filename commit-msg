#!/bin/sh
#
# commit-msg.sh
#
# Removes Comment Markers around the meta information generated by
# the prepare-commit-msg git hook
#
# To enable this hook, rename this file to "commit-msg".

TEXT=$(cat "$1" | sed '/^#.*/d')
if [ -n "$TEXT" ]
then
  echo "$(cat "$1" | perl -p -e 's/#!()/$1/')" > "$1"
else
    echo "Aborting commit due to empty commit message."
    exit 1
fi
